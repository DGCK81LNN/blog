---
layout: default
soulblog-style: |
  .read-all { display: block; text-align: center; }
  article.card { min-width: 284px; }
soulblog-head: |
  <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.11.0/vconsole.min.js"></script>
  <script>
    if (typeof VConsole === "function")
      vConsole = new VConsole()
  </script>
---

<p>欢迎来到<strong>DGCK81LNN的博客！</strong>！</p>

<div id='linf' class="card mb-3" hidden>
  <div class="card-body text-center">
    <div>现在是中国标准时间<!--
    --><span id='linf-h26' hidden>（“27 小时制”）</span
      ></div>
    <div id='linf-date' class="fw-bold">####年##月##日</div>
    <div id='linf-time' class="font-monospace" style="font-size: 2rem"
      >##:##:##</div>
    <div id='linf-aqi' hidden>
      <div><b id='linf-aqi-cityname'></b
        >目前的空气质量为<!--
      --><span id='linf-aqi-value' class="p-1 rounded"></span
        ></div>
      <div class="text-muted" style="font-size: 0.75rem"
        ><a id='linf-aqi-link' target='blank'>详情</a> | <!--
      -->空气质量数据来自 aqicn.org</div>
    </div>
  </div>
</div>

<!--<p><a href="projects.html" class="btn btn-primary">我的 Project 记录表</a></p>-->
<p><a class="btn btn-primary disabled">我的 Project 记录表</a>（施工中，暂时关闭…）</p>

<h2>文章目录</h2>

<div class="d-flex flex-wrap gap-2">
  {%- for post in site.posts %}{%- if post.categories.size == 0 %}
  <article class="col card">
    <header class="card-header">
      <time>{{ post.date | date: "%Y-%m-%d" }}</time>
      {%- for tag in post.tags %}
      {%- assign tagdef = site.data.tags | find: 'name', tag %}
      <a href="{{ site.baseurl }}/tags/{{ tagdef.slug }}.html" class="text-decoration-none">
        <span class="badge bg-{{ tagdef.color | default: 'secondary' }}">{{ tag }}</span>
      </a>
      {%- endfor %}
    </header>
    <div class="card-body">
      {%- assign lang = post.soulblog-excerpt-lang %}
      {%- if lang == "textile" %}
      {{ post.excerpt | textilize }}
      {%- elsif lang == "md" %}
      {{ post.excerpt | markdownify }}
      {%- else %}
      {{ post.excerpt }}
      {%- endif %}
    </div>
    <div class="card-footer">
      <a href="{{ post.url | relative_url }}" class="text-decoration-none read-all">
        阅读全文
        <i class=bi-arrow-right aria-hidden></i>
      </a>
    </div>
  </article>
  {%- endif %}{%- endfor %}
</div>

<script crossorigin=anonymous
  src="https://cdn.polyfill.io/v3/polyfill.min.js?features=Intl.DateTimeFormat,Intl.DateTimeFormat.~locale.zh,Intl.DateTimeFormat.~timeZone.golden,String.prototype.padStart"
></script>
<script>/* air quality api */function _aqiFeed(c,k,n){var L=document.createElement("script");k=_aqiFeed.k=_aqiFeed.k||(k?"&k="+k:""),_aqiFeed.c=c=c instanceof Array?c:[c],_aqiFeed.n=n=n||0;L.async=1,L.src="//feed.aqicn.org/feed/"+c[n].city+"/"+(c[n].lang||"")+"/feed.v1.js?n="+n+k,document.head.append(L)}</script>
<script>
  function $$$(id) { return document.getElementById(id) }

  const liveEl = $$$("linf")
  const h26El = $$$("linf-h26")
  const dateEl = $$$("linf-date")
  const timeEl = $$$("linf-time")
  function updateDateTime() {
    var ts = Date.now() - 10800000
    var h26 = false
    var date = Intl.DateTimeFormat("zh-Hans", {
      timeZone: "PRC",
      dateStyle: "medium"
    }).format(ts)
    var time = Intl.DateTimeFormat("en", {
      timeZone: "PRC",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      hourCycle: "h23"
    }).format(ts)
      .replace(/\d+/, function (s) {
        var h = parseInt(s) + 3
        if (h >= 24) h26 = true
        return String(h).padStart(2, "0")
      })
    h26El.hidden = !h26
    dateEl.textContent = date
    timeEl.textContent = time
  }

  updateDateTime()
  liveEl.hidden = false
  setInterval(updateDateTime, 250)

  _aqiFeed({
    lang: "cn",
    city: "tianjin/nankoulu",
    container: "linf-aqi",
    callback: function (response) {
      var el = document.createElement("div")

      el.innerHTML = response.aqit
      var aqi = parseInt(el.textContent)

      el.style.cssText = response.style
      var bgColor = el.style.backgroundColor,
        textColor = el.style.color

      var cityname = response.cityname,
        impact = response.impact,
        attribution = response.attribution,
        url = response.url

      var details = []
      /*el.innerHTML = response.details
      var detailsNl = el.querySelectorAll("tr")
      for (var i = 0; i < detailsNl.length; ++i) {
        var itemEl = detailsNl[i]
        var itemNl = itemEl.querySelectorAll("td")
        if (itemNl.length < 3) continue

        var itemNameEl = itemNl[0].querySelector("span"),
          itemGraphEl = itemNl[1].querySelector("img")
        if (!(itemNameEl && itemNameEl.firstChild)) continue

        details.push({
          name:  itemNameEl.firstChild.nodeValue.trim(),
          value: itemNl[2].textContent.trim(),
          graph: itemGraphEl && itemGraphEl.src
        })
      }*/

      console.log(aqi)
      console.log(bgColor)
      console.log(textColor)
      console.log(cityname)
      console.log(impact)
      console.log(details)
      console.log(attribution)
      console.log(url)
      el = null

      $$$("linf-aqi-cityname").textContent = cityname
      var vel = $$$("linf-aqi-value")
      vel.textContent = aqi + " " + impact
      vel.style.backgroundColor = bgColor
      vel.style.color = textColor
      $$$("linf-aqi-link").href = url
      $$$("linf-aqi").hidden = false
    }
  })
</script>
